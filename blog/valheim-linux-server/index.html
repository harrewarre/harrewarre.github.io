<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>harre.dev | Valheim server on Linux</title>
    <link rel="stylesheet" href="/assets/style/theme.css">
    <link rel="stylesheet" href="/assets/style/prism-okaidia.css">
  </head>
  <body>
    <header>
        <div class="content-wrapper">
            <h1><a href="/">harre.dev</a></h1>
        </div>
    </header>
    <nav>
        <div class="content-wrapper">
          <a href="/">home</a>
          <a href="/blog">blog</a>
          <a href="/about">about</a>
          <a href="/feed.xml">rss</a>
        </div>
    </nav>
    <main>
      <div class="content-wrapper">
        
<div>Sun Sep 12 2021 02:00:00 GMT+0200 (Central European Summer Time)</div>

<h1>Valheim server on Linux</h1>
<p>Here is a step-by-step guide for setting up a <a href="https://store.steampowered.com/app/892970/Valheim/">Valheim</a> server on Linux. Having done it twice now I thought it would be a good idea to capture this somewhere so that next time I don't have to look any of this up again.</p>
<p>The only assumptions being made here is that your server is running Ubuntu of some semi-recent version and a basic understanding of Linux.</p>
<h2>SteamCMD</h2>
<p>The <a href="https://developer.valvesoftware.com/wiki/SteamCMD">SteamCMD</a> utility from Valve will help us install the gamefiles on the server.
Follow the instructions on the <a href="https://developer.valvesoftware.com/wiki/SteamCMD#Linux.2FmacOS">wiki</a> to get it up and running.</p>
<h2>Valheim</h2>
<p>Now that SteamCMD is available, we can use it to download the gamefiles to the server.</p>
<pre class="language-shell"><code class="language-shell">steamcmd +login anonymous +force_install_dir /home/steam/.steam/steamapps/common/valheim +app_update <span class="token number">896660</span> validate +exit</code></pre>
<p>Some things to note here:</p>
<ul>
<li>I've forced the install directory to something without spaces or other special crap in the name. This will make setting up systemd easier later.</li>
<li>896660 is the steam identifier for Valheim.</li>
<li>You can re-use this command later when you need to update the gamefiles when the devs release an update.</li>
</ul>
<p>For quick re-use, create an <code>sh</code> file and put the command in there. I've named my <code>update_game.sh</code>, mark the file as executable and you're all set.</p>
<p>There are some last changes before we can run the server.</p>
<h2>Valheim server configuration</h2>
<p>There is not a lot to change but it's a requirement if you want to set up things correctly. Browse to the folder where you installed the game and look for a file called <code>start_server.sh</code>. As instructed in the file, make a copy of it (for simplicity I've named mine <code>start_valheim.sh</code>). Here's what mine looks like:</p>
<pre class="language-shell"><code class="language-shell"><span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">TERM</span></span><span class="token operator">=</span>xterm
<span class="token builtin class-name">export</span> <span class="token assign-left variable">templdpath</span><span class="token operator">=</span><span class="token variable">$LD_LIBRARY_PATH</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">LD_LIBRARY_PATH</span><span class="token operator">=</span>./linux64:<span class="token variable">$LD_LIBRARY_PATH</span>
<span class="token builtin class-name">export</span> <span class="token assign-left variable">SteamAppId</span><span class="token operator">=</span><span class="token number">892970</span>

<span class="token builtin class-name">echo</span> <span class="token string">"Starting server PRESS CTRL-C to exit"</span>

./valheim_server.x86_64 <span class="token parameter variable">-name</span> <span class="token string">"Helheim"</span> <span class="token parameter variable">-port</span> <span class="token number">2456</span> <span class="token parameter variable">-world</span> <span class="token string">"Dedicated"</span> <span class="token parameter variable">-password</span> <span class="token string">"..."</span>

<span class="token builtin class-name">export</span> <span class="token assign-left variable">LD_LIBRARY_PATH</span><span class="token operator">=</span><span class="token variable">$templdpath</span></code></pre>
<p>I've added an additional export at the top (found after a bunch of searching for specific problems) to prevent some warnings and errors while the game starts. You could maybe get by without it, it'll depend on the rest of your system. If you see weird stuff in the game output, it's worth a shot.</p>
<p>Update the value for the <code>-name</code> argument to something you like and of course set the <code>-password</code> value. <strong>Make sure it is longer than 5 characters and is not your server name.</strong></p>
<h2>Port configuration</h2>
<p>This step will depend on your network infrastructure, I'm running my server on the Azure cloud platform which has its own way of configuring ports for VMs. Your setup is probably different but the gist of all of it is that you need to open the port range <strong><code>2456-2458</code></strong> for incoming traffic.</p>
<h2>Running the server</h2>
<p>It's tempting now to just run the <code>start_valheim.sh</code> file and start gaming but that comes with a drawback. When you close your SSH session, your server will stop. To fix that we'll use systemd to run the gameserver for us (and even try to restart it should it for some reason crash or shut down).</p>
<p>Here is the config file I'm using:</p>
<pre class="language-text"><code class="language-text">[Unit]
Description=Valheim service
Wants=network.target
After=syslog.target network-online.target

[Service]
Type=simple
Restart=on-failure
RestartSec=10
User=steam
WorkingDirectory=/home/steam/.steam/steamapps/common/valheim/
ExecStart=/bin/sh /home/steam/.steam/steamapps/common/valheim/start_valheim.sh

[Install]
WantedBy=multi-user.target</code></pre>
<p>If you've stuck with the same names for files and directories you can copy-paste this into a file called <code>valheim.service</code> and roll with that, or change it, if needed.</p>
<p>Given the systemd config file above, we can now hand this over to systemd to hand off the running and monitoring of the server. First step is to install the service file.</p>
<ol>
<li>Copy the file to <code>/etc/systemd/system</code>.</li>
<li>Activate the service so that systemd can start the service: <code>sudo systemctl enable valheim</code> (don't include the <code>.service</code> part here).</li>
<li>Start the service: <code>sudo systemctl start valheim</code>.</li>
<li>Check the server status and see if it's actually running: <code>sudo systemctl status valheim</code>.</li>
</ol>
<p>If everything was set up correctly, the output of step 4 will show a line that looks something like this (truncated for brevity):</p>
<pre class="language-shell"><code class="language-shell">● valheim.service - Valheim <span class="token function">service</span>
    Loaded: loaded <span class="token punctuation">(</span>/etc/systemd/system/valheim.service<span class="token punctuation">;</span> enabled<span class="token punctuation">;</span> vendor preset: enabled<span class="token punctuation">)</span>
    Active: active <span class="token punctuation">(</span>running<span class="token punctuation">)</span></code></pre>
<p>Should the server fail to start, use <a href="https://www.commandlinux.com/man-page/man1/journalctl.1.html">journalctl</a> to have a look a the logs. To get the last 20 lines for the valheim server, run the following:</p>
<pre class="language-shell"><code class="language-shell">journalctl <span class="token parameter variable">-u</span> valheim <span class="token parameter variable">-n</span> <span class="token number">20</span></code></pre>
<p>This should give you enough insight to troubleshoot what's going wrong.</p>
<h2>Wrapping up</h2>
<p>At this point you should be able to use the public IP of your server to start playing! I don't know much about the resources required to keep everthing running smoothly but I've been running a server on a fairly modest 2-core/8GB RAM Linux (<code>Standard D2as_v4</code> on Azure) VM that can easily host a 4 player game.</p>
<p>Now go forth and play the viking game with your friends on your very own Valheim server!</p>


<div class="tags">
    
        gaming
    
        linux
    
        steamcmd
    
        valheim
    
</div>

      </div>
    </main>
    <footer>
      <div class="content-wrapper">
        <p>© 2025 harre.dev</p>
       </div>
    </footer>
  </body>
</html>
