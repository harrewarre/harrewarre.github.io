<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Environment variables in an Azure Web App for Containers</title>
    <link rel="stylesheet" href="/assets/style/theme.css">
  </head>
  <body>
    <header>
        <div class="content-wrapper">
            <h1><a href="/">harre.dev</a></h1>
        </div>
    </header>
    <nav>
        <div class="content-wrapper">
          <a href="/">home</a>
          <a href="/blog">blog</a>
          <a href="/about">about</a>
          <a href="feed.xml">rss</a>
        </div>
    </nav>
    <main>
      <div class="content-wrapper">
        <p>Here's a little gotcha I ran into. A .net core app I wrote needs to run inside a container and the target was a Web App for Containers on the Azure platform. No big deal so far.</p>
<p>The app also needs a few settings for it to do its work. We provide these via environment variables for maximum flexibility. After setting up some CI/CD stuff and deploying the app it wouldn't start because it wasn't loading the settings.</p>
<p>But why?? The <a href="https://docs.microsoft.com/en-us/aspnet/core/fundamentals/configuration/?view=aspnetcore-2.2#hierarchical-configuration-data">spec</a> is pretty clear on how to write the keys for the settings in such a way that .net understands them.</p>
<p><img src="settings.png" alt="Settings"></p>
<p>So the secret sauce to this problem is replacing <code>:</code> in the settings for your app with <code>__</code> (that's 2 underscores). I managed to get to this by messing around (there were some other settings with just 1 <code>_</code> as well ...) and I wasn't able to find an official source for this.</p>
<p>It probably has something to do with passing stuff on the command-line that launches the container and the arguments containing <code>:</code>-characters, I have no idea. Using <code>__</code> is what works right now ðŸ™‚</p>

      </div>
    </main>
    <footer>
      <div class="content-wrapper">
        <p>Â© 2025 harre.dev</p>
       </div>
    </footer>
  </body>
</html>
