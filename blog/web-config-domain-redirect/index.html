<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web.config domain rewriting</title>
    <link rel="stylesheet" href="/assets/style/theme.css">
  </head>
  <body>
    <header>
        <div class="content-wrapper">
            <h1><a href="/">harre.dev</a></h1>
        </div>
    </header>
    <nav>
        <div class="content-wrapper">
          <a href="/">home</a>
          <a href="/blog">blog</a>
          <a href="/about">about</a>
          <a href="feed.xml">rss</a>
        </div>
    </nav>
    <main>
      <div class="content-wrapper">
        <p>Here's a quick and easy domain rewriting solution running on an Azure App service.</p>
<p>Some assumptions before you can start though:</p>
<ul>
<li>The app service must be configured with the custom domain you want to redirect from.</li>
<li>The app service is running on the Windows stack (you can configure this during App Service setup).</li>
</ul>
<p>To make things even easier, you can set this whole thing up from inside the Azure portal using the Advanced Tools option which opens the Kudu interface for the web server.
In the Kudu interface click on Debug Console -&gt; CMD. Next, browse to the <code>wwwroot</code> directory at <code>site/wwwroot</code>. From there you can create new files.</p>
<p>Create a <code>web.config</code> file in the <code>wwwroot</code> folder.
Set the contents of the <code>web.config</code> file to the following:</p>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;configuration&gt;
   &lt;system.webServer&gt;
        &lt;rewrite&gt;
          &lt;rules&gt;
            &lt;rule name=&quot;redirect&quot; enabled=&quot;true&quot;&gt;
              &lt;match url=&quot;(.*)&quot; /&gt;
              &lt;action type=&quot;Redirect&quot; url=&quot;https://example.net/{R:1}&quot; appendQueryString=&quot;true&quot; redirectType=&quot;Permanent&quot; /&gt;
            &lt;/rule&gt;
          &lt;/rules&gt;
        &lt;/rewrite&gt;
   &lt;/system.webServer&gt;
&lt;/configuration&gt;
</code></pre>
<p>It will match any url (using the regex <code>(.*)</code>) and set a permanent redirect to <code>https://example.net</code>. The <code>{R:1}</code> backreference will preserve any path that was sent with the original url.</p>
<p>Word of caution though, every change to <code>web.config</code> results in the web server restarting.</p>
<h2>Resources</h2>
<ul>
<li><a href="https://learn.microsoft.com/en-us/iis/extensions/url-rewrite-module/creating-rewrite-rules-for-the-url-rewrite-module">Creating Rewrite rules for the URL Rewrite Module</a></li>
</ul>

      </div>
    </main>
    <footer>
      <div class="content-wrapper">
        <p>Â© 2025 harre.dev</p>
       </div>
    </footer>
  </body>
</html>
