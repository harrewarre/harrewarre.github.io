<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>harre.dev | POST-ing JSON to an ASP.NET Web API controller</title>
    <link rel="stylesheet" href="/assets/style/theme.css">
    <link rel="stylesheet" href="/assets/style/prism-okaidia.css">
  </head>
  <body>
    <header>
        <div class="content-wrapper">
            <h1><a href="/">harre.dev</a></h1>
        </div>
    </header>
    <nav>
        <div class="content-wrapper">
          <a href="/">home</a>
          <a href="/blog">blog</a>
          <a href="/about">about</a>
          <a href="/feed.xml">rss</a>
        </div>
    </nav>
    <main>
      <div class="content-wrapper">
        
<div>Tue Jan 12 2016 01:00:00 GMT+0100 (Central European Standard Time)</div>

<h1>POST-ing JSON to an ASP.NET Web API controller</h1>
<p>So you want to post some JSON to an ASP.NET Web API controller?</p>
<p>I bet you've written this more than you wanted to:</p>
<p>$.ajax({
type: &quot;POST&quot;,
url: url,
data: JSON.stringify(data),
dataType: &quot;json&quot;,
contentType: &quot;application/json; charset=utf-8&quot;
});</p>
<p>I hate that work-around where you specify all sorts of stuff that you don't really want to specify (like <code>dataType</code>, <code>contentType</code>, etc...). This is all required because the friendlier <code>$.post(...)</code> will send your data in a Form encoded way.</p>
<p>So here is a little extension you can put in your JavaScript to create a <code>$.postJson</code> function on the jQuery object. Handy!</p>
<p>$.extend({
postJson: function (url, data) {
return jQuery.ajax({
type: &quot;POST&quot;,
url: url,
data: JSON.stringify(data),
dataType: &quot;application/json&quot;,
contentType: &quot;application/json; charset=utf-8&quot;
});
}
});</p>
<p>Now you can write $.postJson(...) and it will send your data as JSON to the server with all the bells and whistles to tell the server that JSON is being sent.</p>
<p>This is all very nice, but I use TypeScript for all my projects (and so should you!) and I want Intellisense to tell me about the new function. To let TypeScript know that our new function is available, we need to extend the interface that is described in <code>jQuery.d.ts</code>. The <code>jQueryStatic</code> interface to be specific, which contains the regular <code>post</code> function.</p>
<p>Here is how you can accomplish this. Create a new TypeScript type file that will hold the new interface. Make sure it ends with .d.ts so that it is easily recognized as a TypeScript definition file.</p>
<p>Reference the existing <code>jquery.d.ts</code> file in the new <code>.d.ts</code> file and create the interface:</p>
<p>/// <reference path="../jquery/jquery.d.ts" /></p>
<p>interface JQueryStatic {
}</p>
<p>Next step is adding our new <code>postJson</code> function to it. It has two arguments: <code>url</code> and <code>data</code> and returns a <code>jQuery XML HTTP Request</code> so the signature will look like this in TypeScript:</p>
<p>postJson(url: string, data: any): JQueryXHR;</p>
<p>Turning the full interface into this:</p>
<p>/// <reference path="../jquery/jquery.d.ts" /></p>
<p>interface JQueryStatic {
postJson(url: string, data: any): JQueryXHR;
}</p>
<p>There is one thing left and that is replacing all the references to the old <code>jquery.d.ts</code> file (<code>/// &lt;reference path=&quot;../jquery/jquery.d.ts&quot; /&gt;</code>) and replace them with the new extended definition.</p>
<p>So this:</p>
<p>/// <reference path="../jquery/jquery.d.ts" /></p>
<p>Will become this:</p>
<p>/// <reference path="../../scripts/typings/custom/#YOURNEWLYCREATEDDTSFILE#.d.ts" /></p>
<p>In all <code>.ts</code> files where you want to use your new <code>$.postJson(...)</code> function.</p>
<p>Because we extended the existing jQuery definition, everything still works as expected and your new function is now strong-typed as well and opens the door for more advanced <code>postJson</code> functions if you want.</p>
<p><img src="postJson.png" alt="postJson function"></p>
<p>So in the end we turned a common copy-paste piece of code into a nice helper method that we can maintain in one single place with all the benefits of TypeScripts strong typing.</p>


<div class="tags">
    
        javascript
    
        jquery
    
        c#
    
        asp.net
    
</div>

      </div>
    </main>
    <footer>
      <div class="content-wrapper">
        <p>Â© 2025 harre.dev</p>
       </div>
    </footer>
  </body>
</html>
