<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generating an RSS feed in C#</title>
    <link rel="stylesheet" href="/assets/style/theme.css">
  </head>
  <body>
    <header>
        <div class="content-wrapper">
            <h1><a href="/">harre.dev</a></h1>
        </div>
    </header>
    <nav>
        <div class="content-wrapper">
          <a href="/">home</a>
          <a href="/blog">blog</a>
          <a href="/about">about</a>
          <a href="feed.xml">rss</a>
        </div>
    </nav>
    <main>
      <div class="content-wrapper">
        <p>A hobby project of mine needed to generate an RSS feed. I was already doing this by just generating and XML file in the webroot and linking to that on the frontpage. But during this coding session, where all the data is pulled straight from the markdown files I wanted to create a controller action to do the generating for me.</p>
<p>First things first, there is an assembly available out of the box in the .NET Framework. All you need is to make reference to <strong>System.ServiceModel.Syndication</strong> and you are ready to start writing code. The classes we are using are</p>
<ul>
<li>SyndicationItem</li>
<li>SyndicationFeed</li>
<li>TextSyndicationContent</li>
</ul>
<p>We want to write the result straight into the response, so a FileResult will serve as a baseclass for our RssResult class. First you'll want to create a new constructor that takes in the items that you want to display in the feed. Don't forget to call the base constructor with the right content type (<strong>application/rss+xml</strong> in our case) to tell the requesting client that we are serving an RSS feed.</p>
<p>By overriding the WriteFile method, we take control of writing to the response stream. To make my code independent of site location I first resolve the domain from the request URL. Next we convert the items we want in the feed to SyndicationItems. A quick LINQ select statement makes short work of the conversion.</p>
<p>To create a feed, we need to put the SyndicationItems in a SyndicationFeed. Set the title and description of the feed and you are ready to write to the response stream. Create a new XmlWriter object and point it into the outputstream of the response we are going to send to the client. All that is left then is to put the writer to work using the WriteTo method on the SyndicationFeed's Rss20Formatter.</p>
<p>Pretty easy right? :-) Copy-Pasta ready code below! Enjoy.</p>
<p>public class RssResult : FileResult
{
private readonly IEnumerable<BlogPost> FeedItems;
private readonly Uri Url;</p>
<p>public RssResult(IEnumerable<BlogPost> items)
: base(&quot;application/rss+xml&quot;)
{
this.FeedItems = items;
this.Url = HttpContext.Current.Request.Url;
}</p>
<p>protected override void WriteFile(HttpResponseBase response)
{
var sourceUrl = this.Url.GetLeftPart(UriPartial.Authority);</p>
<p>var feedItems = this.FeedItems.Select(p =&gt; new SyndicationItem(p.Title, p.Body, new Uri(string.Format(&quot;{0}/post/{1}&quot;, sourceUrl, p.Slug)))
{
PublishDate = new DateTimeOffset(p.CreateDate)
});</p>
<p>var feed = new SyndicationFeed(feedItems)
{
Title = new TextSyndicationContent(&quot;Harrewijnen.net&quot;, TextSyndicationContentKind.Html),
Description = new TextSyndicationContent(&quot;From the mind of a coder/gamer&quot;)
};</p>
<p>using (XmlWriter writer = XmlWriter.Create(response.OutputStream))
{
feed.GetRss20Formatter().WriteTo(writer);
}
}
}</p>

      </div>
    </main>
    <footer>
      <div class="content-wrapper">
        <p>Â© 2025 harre.dev</p>
       </div>
    </footer>
  </body>
</html>
